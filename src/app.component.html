<div class="min-h-screen bg-gray-900 text-white flex items-center justify-center font-sans p-4">
  <div class="w-full max-w-md mx-auto">

    <header class="text-center mb-8">
      <h1 class="text-4xl font-bold tracking-tight text-cyan-400 sm:text-5xl">Voice Recorder</h1>
      <p class="mt-2 text-lg text-gray-400">Record, listen, and repeat.</p>
    </header>

    <main class="bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-2xl p-6 sm:p-8 border border-gray-700">
      
      <!-- Display Area -->
      <div class="h-32 flex items-center justify-center bg-gray-900 rounded-lg mb-8">
        @if (isRecording()) {
          <div class="flex items-center space-x-3">
            <span class="relative flex h-4 w-4">
              <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
              <span class="relative inline-flex rounded-full h-4 w-4 bg-red-500"></span>
            </span>
            <span class="text-3xl font-mono tracking-wider text-red-400">{{ formattedRecordingTime() }}</span>
          </div>
        } @else if (audioURL()) {
          <audio [src]="audioURL()" controls class="w-full"></audio>
        } @else {
          <p class="text-gray-500 text-lg">{{ errorMessage() ? 'Error' : 'Ready to record' }}</p>
        }
      </div>

      <!-- Error Message -->
      @if (errorMessage()) {
        <div class="bg-red-900/50 border border-red-700 text-red-300 px-4 py-3 rounded-lg relative mb-6" role="alert">
          <strong class="font-bold">Error: </strong>
          <span class="block sm:inline">{{ errorMessage() }}</span>
        </div>
      }

      <!-- Controls -->
      <div class="flex items-center justify-center space-x-4">
        
        <!-- Record/Stop Button -->
        <button 
          (click)="toggleRecording()"
          [disabled]="isPlaying()"
          [class]="isRecording() 
            ? 'bg-red-600 hover:bg-red-700' 
            : 'bg-cyan-500 hover:bg-cyan-600'"
          class="flex items-center justify-center w-20 h-20 rounded-full text-white shadow-lg focus:outline-none focus:ring-4 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-300 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:scale-100"
          [class.focus:ring-red-500]="isRecording()"
          [class.focus:ring-cyan-400]="!isRecording()">
          
          @if (isRecording()) {
            <!-- Stop Icon -->
            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z" clip-rule="evenodd"></path></svg>
          } @else {
            <!-- Microphone Icon -->
            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd"></path></svg>
          }
        </button>

        <!-- Play/Stop Playback Button -->
        <button 
          (click)="handlePlaybackClick()"
          [disabled]="!audioURL() && !isRecording()"
          class="flex items-center justify-center w-16 h-16 rounded-full bg-gray-700 text-cyan-400 hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-cyan-400 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-300 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:text-gray-500">
          @if (isPlaying()) {
            <!-- Pause Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
            </svg>
          } @else {
            <!-- Play Icon -->
            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
          }
        </button>
        
        <!-- Delete Button -->
        <button 
          (click)="deleteAudio()"
          [disabled]="!audioURL() || isPlaying() || isRecording()"
          class="flex items-center justify-center w-16 h-16 rounded-full bg-gray-700 text-red-400 hover:bg-gray-600 focus:outline-none focus:ring-4 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-300 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:text-gray-500">
          <!-- Trash Icon -->
          <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>
        </button>

      </div>
    </main>
  </div>
</div>